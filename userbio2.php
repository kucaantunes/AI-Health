<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>AI Health</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-icon.png">
    <link rel="shortcut icon" href="favicon.ico">


    <link rel="stylesheet" href="vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="vendors/selectFX/css/cs-skin-elastic.css">


    <link rel="stylesheet" href="vendors/chosen/chosen.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>



</head>

<body>
    <!-- Left Panel -->

    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">

            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="./"><img src="images/logo.png" alt="Logo"></a>
                <a class="navbar-brand hidden" href="./"><img src="images/logo2.png" alt="Logo"></a>
            </div>

            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html"> <i class="menu-icon fa fa-dashboard"></i>Dashboard </a>
                    </li>
                    <h3 class="menu-title">UI elements</h3><!-- /.menu-title -->
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-laptop"></i>Components</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="fa fa-puzzle-piece"></i><a href="ui-buttons.html">Buttons</a></li>
                            <li><i class="fa fa-id-badge"></i><a href="ui-badges.html">Badges</a></li>
                            <li><i class="fa fa-bars"></i><a href="ui-tabs.html">Tabs</a></li>
                            <li><i class="fa fa-share-square-o"></i><a href="ui-social-buttons.html">Social Buttons</a></li>
                            <li><i class="fa fa-id-card-o"></i><a href="ui-cards.html">Cards</a></li>
                            <li><i class="fa fa-exclamation-triangle"></i><a href="ui-alerts.html">Alerts</a></li>
                            <li><i class="fa fa-spinner"></i><a href="ui-progressbar.html">Progress Bars</a></li>
                            <li><i class="fa fa-fire"></i><a href="ui-modals.html">Modals</a></li>
                            <li><i class="fa fa-book"></i><a href="ui-switches.html">Switches</a></li>
                            <li><i class="fa fa-th"></i><a href="ui-grids.html">Grids</a></li>
                            <li><i class="fa fa-file-word-o"></i><a href="ui-typgraphy.html">Typography</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-table"></i>Tables</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="fa fa-table"></i><a href="tables-basic.html">Basic Table</a></li>
                            <li><i class="fa fa-table"></i><a href="tables-data.html">Data Table</a></li>
                        </ul>
                    </li>
                    <li class="menu-item-has-children active dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-th"></i>Forms</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-th"></i><a href="forms-basic.html">Basic Form</a></li>
                            <li><i class="menu-icon fa fa-th"></i><a href="forms-advanced.html">Advanced Form</a></li>
                        </ul>
                    </li>

                    <h3 class="menu-title">Icons</h3><!-- /.menu-title -->

                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-tasks"></i>Icons</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-fort-awesome"></i><a href="font-fontawesome.html">Font Awesome</a></li>
                            <li><i class="menu-icon ti-themify-logo"></i><a href="font-themify.html">Themefy Icons</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="widgets.html"> <i class="menu-icon ti-email"></i>Widgets </a>
                    </li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-bar-chart"></i>Charts</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-line-chart"></i><a href="charts-chartjs.html">Chart JS</a></li>
                            <li><i class="menu-icon fa fa-area-chart"></i><a href="charts-flot.html">Flot Chart</a></li>
                            <li><i class="menu-icon fa fa-pie-chart"></i><a href="charts-peity.html">Peity Chart</a></li>
                        </ul>
                    </li>

                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-area-chart"></i>Maps</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-map-o"></i><a href="maps-gmap.html">Google Maps</a></li>
                            <li><i class="menu-icon fa fa-street-view"></i><a href="maps-vector.html">Vector Maps</a></li>
                        </ul>
                    </li>
                    <h3 class="menu-title">Extras</h3><!-- /.menu-title -->
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-glass"></i>Pages</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="menu-icon fa fa-sign-in"></i><a href="page-login.html">Login</a></li>
                            <li><i class="menu-icon fa fa-sign-in"></i><a href="page-register.html">Register</a></li>
                            <li><i class="menu-icon fa fa-paper-plane"></i><a href="pages-forget.html">Forget Pass</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>
    </aside><!-- /#left-panel -->

    <!-- Left Panel -->

    <!-- Right Panel -->

    <div id="right-panel" class="right-panel">

        <!-- Header-->
     
			  
			  

			  
<?php


/* functions 		               */
include("./submysql.php");
include("./subconfig.php");
include("./subdisplay.php");
include("./subtimedate.php");

/* HTML special characters converted before data is displayed        */


// ----------
// item form


function show_item($item, $subcategory, $description, $supplier, $item_index, $menu) {
global $sql_result_subcategories, $sql_result_suppliers;
  if ($item) {
     $sel_subcategory = $subcategory;
     $sel_supplier = $supplier;
   }
   
?>

 <div class="card-body">


 <div class="form-group">	
   <form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
   <table class="entry">
   <tbody>
     <tr> &nbsp; </tr>
     <tr>
	 
       <td><strong>Value:</strong></td>  
	   
	   
	     
	   
	   
<?php
     echo "
	 
	 
	 
	 
	 <td><input type=\"text\"  size=\"50\" name=\"item\" value=\"$item\" /></td>
     </tr>
     <tr>
	 
	
	 
       <td ><strong>Model:</strong></td>
       <td><select name=\"sel_subcategory\"><option value=\"$subcategory\">$subcategory</option>";
     while ($row = mysqli_fetch_array($sql_result_subcategories)) {
         $subcat_opt = $row['subcategory'];
         echo "<option value=\"$subcat_opt\">$subcat_opt</option>";
       }
     echo "</select></td>
     </tr>
   
     <tr>
       <td><strong>Month:</strong></td>

       <td><select name=\"sel_supplier\"><option value=\"$supplier\">$supplier</option>";
	   
     while ($row = mysqli_fetch_array($sql_result_suppliers)) {
         $supplier_opt = $row['supplier'];
         echo "<option value=\"$supplier_opt\">$supplier_opt</option>";
       }
     echo "</select></td>
     </tr>
	 
	 
     <tr><td><input type=\"hidden\" name=\"item_code\" value=\"$item\" /></td><td><input type=\"hidden\" name=\"item_index\" value=\"$item_index\" /></td></tr>";
?>



<?php
  
    // Connect to database 
    $con = mysqli_connect("localhost","root","","vel");
      
    // mysqli_connect("servername","username","password","database_name")
   
    // Get all the categories from description table
    $sql = "SELECT * FROM `tblregistration`";
    $all_categories = mysqli_query($con,$sql);
   
    // The following code checks if the submit button is clicked 
    // and inserts the data in the database accordingly
    if(isset($_POST['submit']))
    {
        // Store the Product name in a "name" variable
        $name = mysqli_real_escape_string($con,$_POST['RegFullName']);
         
        // Store the description ID in a "id" variable
        $id = mysqli_real_escape_string($con,$_POST['description']); 
         
        // Creating an insert query using SQL syntax and
        // storing it in a variable.
        $sql_insert = 
        "INSERT INTO `tblregistration`(`RegFullName`, `RegID`)
            VALUES ('$name','$id')";
           
          // The following code attempts to execute the SQL query
          // if the query executes with no errors 
          // a javascript alert message is displayed
          // which says the data is inserted successfully
          if(mysqli_query($con,$sql_insert))
        {
            echo '<script>alert("Record added successfully")</script>';
        }
    }
?>
   





   
        
        <h9> <b> Select a Patient: </b></h9>
        <select name="description">
            <?php 
               
                while ($description = mysqli_fetch_array(
                        $all_categories,MYSQLI_ASSOC)):; 
            ?>
			
                <option name="description" value="<?php echo $description["RegFullName"]; ?>">
                    <?php echo $description["RegFullName"];
                        // To show the description name to the user
                    ?>
                </option>
            <?php 
                endwhile; 
                // While loop must be terminated
            ?>
        </select>
        
		<!--
        <input type="submit" value="submit" name="submit">
		-->
		
		
	



    <tr><td></td><td>
	
	<div> &nbsp;</div>
	<div> &nbsp;</div>
	
	</div>
	   </div>
	
	<table><tbody><tr><td><input type="submit" value="First" name="first" /></td><td><input type="submit" value="Previous" name="previous" /></td><td><input type="submit" value="Next" name="next" /></td><td><input type="submit" value="Last" name="last" /></td><td>&nbsp;</td><td><input type="submit" value="Reset" name="reset" /></td><td>&nbsp;</td><td>&nbsp;</td>
	
	
	<td><input type="submit" value="New" name="clear" /></td>
	</tr>
	<tr>
	
	<td><input type="submit" value="Add" name="add" /></td><td><input type="submit" value="Update" name="update" /></td><td><input type="submit" value="List" name="list" /></td><td><input type="submit" value="Delete" name="delete" /></td></tr></tbody></table></td>
   </tr>
   
   </tbody>
  </table></form>
  
 
  
  
  <?php

  
  ?>
  
  
<?php
//  sub_button($menu, "Menu");
//  return;
 }

// -----------------
// create item array , list of subcategories and suppliers
function create_item_list($db_connection) {
global $item_array, $sql_result_subcategories, $sql_result_suppliers;

// sql query - list items
 $sql_item_list = "SELECT item, subcategory, description, supplier FROM item ORDER BY item";

// list items
 $sql_item_list_result = sub_query($sql_item_list, $db_connection);

 if (!$sql_item_list_result) {
    sub_company_heading($my_company, $module_name, $application);
    sub_message_error("Unable to access item table");
    sub_button($module, "Reset");
    sub_button($menu, "Menu");
    exit;
  }

// create item array
 $item_index = 0;

// escape single, double quote, backslash
 while ($row = mysqli_fetch_array($sql_item_list_result)) {
      $item_esc = addslashes($row['item']);
      $subcategory_esc = addslashes($row['subcategory']);
      $description_esc = addslashes($row['description']);
      $supplier_esc = addslashes($row['supplier']);
      $item_array[$item_index] = array($item_esc, $subcategory_esc, $description_esc, $supplier_esc);
      $item_index += 1;
   }
 $last_item = $item_index - 1;

// sql query - list of subcategories
 $sql_list_subcategories = "SELECT subcategory, category, description from subcategory ORDER BY category, subcategory";

// execute SQL query
 $sql_result_subcategories = sub_query($sql_list_subcategories, $db_connection);

 if (!$sql_result_subcategories) {
   sub_company_heading($my_company, $module_name, $application);
   sub_message_error("Unable to access subcategory table");
   sub_button($module, "Reset");
   sub_button($menu, "Menu");
   exit;
  }

// sql query - list of suppliers
 $sql_list_suppliers = "SELECT supplier, address, contact, telephone FROM supplier ORDER BY supplier";

// execute SQL query
 $sql_result_suppliers = sub_query($sql_list_suppliers, $db_connection);

 if (!$sql_result_suppliers) {
   sub_company_heading($my_company, $module_name, $application);
   sub_message_error("Unable to access supplier table");
   sub_button($module, "Reset");
   sub_button($menu, "Menu");
   exit;
  }
//  -1 if no items
 return $last_item;
 }
 

// ------------------------------
// display item form with no data
function no_item_data($item_index, $my_company, $module_name, $menu, $application) {
 sub_company_heading($my_company, $module_name, $application);
 show_item("", "", "", "", $item_index, $menu);
 return;
 }

// ---------------------------------------------------
// extract item data from item array and use htmlspecialchars
function get_item_html($item_index) {
global $item_array;

  if (!($item_index < 0)) {
    list($item_esc, $subcategory_esc, $description_esc, $supplier_esc) = $item_array[$item_index];
    $item_html = htmlspecialchars(stripslashes($item_esc), ENT_QUOTES);
    $subcategory_html = htmlspecialchars(stripslashes($subcategory_esc), ENT_QUOTES);
    $description_html = htmlspecialchars(stripslashes($description_esc), ENT_QUOTES);
    $supplier_html = htmlspecialchars(stripslashes($supplier_esc), ENT_QUOTES);
    return array($item_html, $subcategory_html, $description_html, $supplier_html);
   } else {
       return array("", "", "", "");
     }
}

// ---------------------------------------------------
// extract item data from item array, with backslashes
function get_item_esc($item_index) {
global $item_array;
 if (!($item_index < 0)) {
      return $item_array[$item_index];
  } else {
	 return array("", "", "", "");
    }       
}

// ---------------------------------
// main module
// ---------------------------------

 $module_name="";
 $module="maintitem.php";
 $db = "vel";

// get config variables and create connection
 list($my_company, $date_format, $menu, $database, $date_separator, $db_connection, $application) = sub_config($db);  

 $first_item = 0;
 $last_item = create_item_list($db_connection);

// check if form was submitted and which button was pressed, set switch
 $switch = "first";

 if (isset($_POST['update']))  {
   $switch = "update";
  }
 if (isset($_POST['previous']))  {
   $switch = "previous";
  }
 if (isset($_POST['next']))  {
   $switch = "next";
  }
 if (isset($_POST['first']))  {
   $switch = "first";
  }
 if (isset($_POST['last']))  {
   $switch = "last";
  }
 if (isset($_POST['reset']))  {
   $switch = "reset";
  }
 if (isset($_POST['clear']))  {
   $switch = "clear";
  }
 if (isset($_POST['add']))  {
   $switch = "add";
  }
 if (isset($_POST['list']))  {
   $switch = "list";
  }
 if (isset($_POST['delete']))  {
   $switch = "delete";
  }
  
  
  
 
switch($switch) {
//---------------------------------------------------
  case "first":
// start case - first item

  $item_index = $first_item;
  if ($last_item < 0) {
     no_item_data($last_item, $my_company, $module_name, $menu, $application);
     exit;
   }

// get item details from array processed for html
  list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);

// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
    
  break;
// end case first

//---------------------------------------------------
 case "add":
// start case - add pressed

// retrieve variables
  $item = trim($_POST['item']);
  $subcategory = trim($_POST['sel_subcategory']); 
  $description = trim($_POST['description']);
  $supplier = trim($_POST['sel_supplier']);
  $item_index = $_POST['item_index'];
 
// escape quotes and slash
  $item_esc = addslashes($item);
  $subcategory_esc = addslashes($subcategory);
  $description_esc = addslashes($description);
  $supplier_esc = addslashes($supplier);
  
// htmlspecialchars 
  $item_html = htmlspecialchars($item, ENT_QUOTES);
  $subcategory_html = htmlspecialchars($subcategory, ENT_QUOTES);
  $description_html = htmlspecialchars($description, ENT_QUOTES);
  $supplier_html = htmlspecialchars($supplier, ENT_QUOTES);
 
// validate input
  if ((!$item_esc) or (!$subcategory_esc) or (!$description_esc) or (!$supplier_esc)) {
     sub_company_heading($my_company, $module_name, $application);
     show_item($item_html, $subcategory_html, $description_html, $supplier_html, $last_item + 1, $menu);
     sub_message_warning("At least one field is blank");
     exit;
   }

// sql query - insert
 $sql_insert = "INSERT INTO item (item, subcategory, description, supplier) VALUES ('$item_esc', '$subcategory_esc', '$description_esc', '$supplier_esc')";

// sql query - lookup
 $sql_lookup = "SELECT item, subcategory, description, supplier FROM item WHERE item='$item_esc'";

// lookup item
 $sql_result = sub_query($sql_lookup,$db_connection);

 while ($row = mysqli_fetch_array($sql_result)) {
   $item2 =  $row['item'];
   $subcategory2 =  $row['subcategory']; 
   $description2 =  $row['description'];
   $supplier2 =  $row['supplier'];
  
// htmlspecialchars
   $item2_html = htmlspecialchars($item2, ENT_QUOTES);
   $subcategory2_html = htmlspecialchars($subcategory2, ENT_QUOTES);
   $description2_html = htmlspecialchars($description2, ENT_QUOTES);
   $supplier2_html = htmlspecialchars($supplier2, ENT_QUOTES);
  }
/*
 if (isset($item2)) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item2_html, $subcategory2_html, $description2_html, $supplier2_html, $last_item, $menu);
    sub_message_error("Item already exists");
    exit;
  }*/
 $sql_result = sub_query($sql_insert,$db_connection);

// force 'invalid item' status
 $new_item_index = $last_item + 1;

 if (!$sql_result) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $new_item_index, $menu);
    sub_message_error("Unable to add item");
  } else {
     sub_company_heading($my_company, $module_name, $application);
     show_item($item_html, $subcategory_html, $description_html, $supplier_html, $new_item_index, $menu);
     sub_message_info("A new item was added");
  }

 break;
// end case add

//---------------------------------------------------
 case "update":
// start case - update item
// item_index from the original item
// item name is the key and cannot be changed

// retrieve variables
  $item = trim($_POST['item']);
  $subcategory = trim($_POST['sel_subcategory']); 
  $description = trim($_POST['description']);
  $supplier = trim($_POST['sel_supplier']);
  $item_index = $_POST['item_index'];
 
// escape quotes and slash
  $item_esc = addslashes($item);
  $subcategory_esc = addslashes($subcategory);
  $description_esc = addslashes($description);
  $supplier_esc = addslashes($supplier);
  
// htmlspecialchars
  $item_html = htmlspecialchars($item, ENT_QUOTES);
  $subcategory_html = htmlspecialchars($subcategory, ENT_QUOTES);
  $description_html = htmlspecialchars($description, ENT_QUOTES);
  $supplier_html = htmlspecialchars($supplier, ENT_QUOTES);
 
// validate input
  if ((!$item_esc) or (!$subcategory_esc) or (!$description_esc) or (!$supplier_esc)) {
     sub_company_heading($my_company, $module_name, $application);
     show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
     sub_message_warning("At least one of the fields is blank");
     exit;
   }

// *******************
// validate item index
// *******************
 if (!is_numeric($item_index) or ($item_index > $last_item) or ($item_index < 0)) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
    sub_message_error("Item does not exist, it cannot be updated");
    exit;
  }

// ***********************
// cannot change item key 
// ***********************
// get item details from array
 list($item2_esc, $subcategory2_esc, $description2_esc, $supplier2_esc) = get_item_esc($item_index);

// compare form to array
 if (!($item_esc == $item2_esc)) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
    sub_message_error("Item code was changed, item cannot be updated");
    exit;
  }
 
// sql query - update a row in item table
   $sql_update_item = "UPDATE item SET subcategory='$subcategory_esc', description='$description_esc', supplier='$supplier_esc' WHERE item='$item_esc'";
   
   $sql_update_item_result = sub_query($sql_update_item, $db_connection);

   if (!$sql_update_item_result) {
       sub_company_heading($my_company, $module_name, $application);
       show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
 	sub_message_error("Unable to update item");
	exit;
     }

// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu); 
  sub_message_info("Item was updated");

  break;
// end case update

//---------------------------------------------------
 case "delete":
// start case delete

// retrieve variables
  $item = trim($_POST['item']);
  $subcategory = trim($_POST['sel_subcategory']); 
  $description = trim($_POST['description']);
  $supplier = trim($_POST['sel_supplier']);
  $item_index = $_POST['item_index'];
 
// escape quotes and slash
  $item_esc = addslashes($item);
  
// htmlspecialchars
  $item_html = htmlspecialchars($item, ENT_QUOTES);
  $subcategory_html = htmlspecialchars($subcategory, ENT_QUOTES);
  $description_html = htmlspecialchars($description, ENT_QUOTES);
  $supplier_html = htmlspecialchars($supplier, ENT_QUOTES); 

// *******************
// validate item index
// *******************
 if (!is_numeric($item_index) or ($item_index > $last_item) or ($item_index < 0)) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $last_item + 1, $menu);
    sub_message_error("Item does not exist, it cannot be deleted");
    exit;
  }

// ***********************
// cannot change item key 
// ***********************
// get item details from array
 list($item2_esc, $subcategory2_esc, $description2_esc, $supplier2_esc) = get_item_esc($item_index);

// compare item
 if (!($item_esc == $item2_esc)) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
    sub_message_error("Item code was changed, item cannot be deleted");
    exit;
  }

// sql delete query
 $sql_delete = "DELETE FROM item WHERE item='$item_esc'";

 $sql_delete_result = sub_query($sql_delete, $db_connection);

 if (!$sql_delete_result) {
    sub_company_heading($my_company, $module_name, $application);
    show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
    sub_message_error("Unable to delete from item table");
    exit;
  } else {
      sub_company_heading($my_company, $module_name, $application);
      show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
      sub_message_info("Item was deleted");
      exit;
  }

 break;
// end case delete

//---------------------------------------------------
  case "previous":
// start case - previous pressed

// retrieve hidden field from form
  $item_index = $_POST['item_index'];
 
  if (!is_numeric($item_index) or ($item_index > $last_item) or ($item_index < 0)) {
     no_item_data($last_item, $my_company, $module_name, $menu, $application);
     exit;
   }

// decrement item pointer, first --> last
  if (($item_index > 0) and ($item_index <= $last_item)) {
     $item_index -= 1; 
    } else {
     $item_index = $last_item;
   }

// get item details from array in html format
  list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);

// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);

  break;
// end case previous

//---------------------------------------------------
  case "next":
// start case - next pressed

// retrieve hidden field from form
  $item_index = $_POST['item_index'];
 
  if (!is_numeric($item_index) or ($item_index > $last_item) or ($item_index < 0)) {
     no_item_data($last_item, $my_company, $module_name, $menu, $application);
     exit;
   }
 
// increment item pointer, last --> first
  if (($item_index >= 0) and ($item_index < $last_item)) {
     $item_index += 1; 
    } else {
     $item_index = 0;
   }

// get item details from array in html format
  list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);

// display the form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);

  break;
// end case next

//---------------------------------------------------
  case "last":
// start case - last pressed

  $item_index = $last_item;

  if ($last_item < 0) {
     no_item_data($last_item, $my_company, $module_name, $menu, $application);
     exit;
   }

// get item details from array in html format
  list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);
 
// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
 
  break;
// end case last

//---------------------------------------------------
  case "reset":
// start case - reset pressed

// retrieve hidden field from form
  $item_index = $_POST['item_index'];
 
  if (!is_numeric($item_index) or ($item_index > $last_item) or ($item_index < 0)) {
     no_item_data($last_item, $my_company, $module_name, $menu, $application);
     exit;
   }

// get item details from array in html format
  list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);
 
// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);
 
  break;
// end case reset

//---------------------------------------------------
  case "clear":
// start case - clear pressed

// retrieve hidden field from form
  $item_index = $_POST['item_index'];
 
  $item_html = "";
  $subcategory_html = "";
  $description_html = "";
  $supplier_html = "";

// display form
  sub_company_heading($my_company, $module_name, $application);
  show_item($item_html, $subcategory_html, $description_html, $supplier_html, $item_index, $menu);

  break;
// end case clear

//---------------------------------------------------
 case "list":
// start case - list items from the item array

// today's date
 list($timestamp, $today, $local_date) = get_date($date_format, $date_separator);

 $item_index = 0;
 echo "<h1>$my_company</h1><h1>&nbsp;</h1><h1>Bio records &nbsp; &nbsp; &nbsp; $local_date</h1><h1>&nbsp;</h1>
   <table><tbody>
   <tr style=\"font-family: helvetica; background-color: #FFEC69; font-weight: bold\">";
 echo "<td>Item</td><td style=\"background-color: #FFFFFF;\">&nbsp;</td><td>Subcategory</td><td>Description</td><td>Supplier</td></tr>"; 
 while (!($item_index > $last_item)) { 
     list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);
     $item_index += 1;
     echo "<tr><td>$item_html</td><td>&nbsp;</td><td>$subcategory_html</td><td>$description_html</td><td>$supplier_html</td></tr>";
   }
 echo "</tbody></table>"; 
 echo "<p><b>$item_index &nbsp; items</b></p>";
 break;
// end case list

//---------------------------------------------------
 default:
   sub_company_heading($my_company, $module_name, $application);
   sub_message_error("case = default");
 }
 
  
  //  list($timestamp, $today, $local_date) = get_date($date_format, $date_separator);

 $item_index = 0;
 echo "
 
 <div> &nbsp;</div>
 <h1></h1><h1>&nbsp;</h1><h6>Patient Bio Data &nbsp; &nbsp; &nbsp; </h6>
   <table><tbody>
   
   <tr style=\"font-family: helvetica; background-color: gray; font-weight: bold\">";
 echo "<td>Value</td><td style=\"background-color: #FFFFFF;
 
 
 tr:nth-child(even){background-color: #f2f2f2}

 
 
 
 \">&nbsp;</td><td>Model</td><td>Patient</td><td>Month</td></tr>"; 
 while (!($item_index > $last_item)) { 
     list($item_html, $subcategory_html, $description_html, $supplier_html) = get_item_html($item_index);
     $item_index += 1;
     echo "<tr><td>$item_html</td><td>&nbsp;</td><td>$subcategory_html</td><td>$description_html</td><td>$supplier_html</td></tr>";
   }
 echo "</tbody></table>"; 
 echo "<p><b>$item_index &nbsp; records</b></p>";
  

 
 
 
?>
		</div>

    <!-- Right Panel -->


<script src="vendors/jquery/dist/jquery.min.js"></script>
<script src="vendors/popper.js/dist/umd/popper.min.js"></script>
<script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="assets/js/main.js"></script>
<script src="vendors/chosen/chosen.jquery.min.js"></script>

<script>
    jQuery(document).ready(function() {
        jQuery(".standardSelect").chosen({
            disable_search_threshold: 10,
            no_results_text: "Oops, nothing found!",
            width: "100%"
        });
    });
</script>

</body>

</html>
